# Devin向けタスク計画策定依頼

以下の3つの情報が後述されます：

- **タスク内容**
- **プロジェクト基本情報**
- **タスク固有の補足情報**

これらを踏まえて、**Devin(Claude sonnet 3.7)** に実行させたいタスクの **「計画策定依頼」** を.md形式で作成してください。

**注:** もしタスクが **10ACU（約3時間）を超える** 規模になりそうであれば、**o1 Pro側で複数の指示文プロンプトを分割出力** する想定です。計画策定時点で、依存関係や実装順を考慮した小規模タスク群に仕分けし、Devinが複数回にわたって対応できるようにしてください。

## 【依頼概要】

本依頼の目的は、Devinが **1タスクにつき 10ACU（約3時間）以内** で完了できる範囲を正しく認識し、必要に応じてサブタスクに分割しながら **「実行するための指示文（計画）」** を策定することです。

- タスクが複数に分割される場合は、**並行実行が可能か / 順次実行が必要か** を明記し、依存関係がある場合はその旨も示してください。
- **o1 Proが後工程で別々のタイミング・別々のプロンプト** として Devin に渡せるよう、**サブタスクごとに指示文を分ける** ことも考慮してください。

## 【指示書の要件】

1. **ジュニアエンジニア(Devin)が理解可能な具体的な手順書**

   - コード修正箇所の例示 (ファイル名・関数名など) や、実装のヒントを含めてもOK。
   - ただし不必要に冗長な説明は避け、**最小限かつ十分な情報**を盛り込む。
   - **10ACU(3時間)超過が懸念される場合は、適宜サブタスクを分割し、**複数の指示文に分けてもよいことを前提に計画を立てる。

2. **1タスクあたり 10ACU(3時間)以内で終わるよう範囲を限定**

   - タスクが大きい場合はサブタスクに分割し、各サブタスクも3時間程度に収める。
   - それぞれのサブタスクが **レビューしやすいPRの大きさ**(数十ファイル以下)になるよう配慮する。

3. **成果物の定義と提出先の明示**

   - 例: 「ブランチ名には Taskを識別する英単語 を含め、完了後にGitHubへプルリクを作成」
   - 「ローカル検証方法」(例: npm run dev でブラウザアクセスし正常動作を確認)
   - テスト実行や E2E チェックなど、完了判定ができる基準を明文化する。

4. **プロジェクトのルール遵守**

   - 「プロジェクト基本情報」(依存ライブラリ、コーディング規約、lintルールなど) と整合性を保つ。
   - 「タスク固有の補足情報」で指定された要件や制約を必ず反映させる。

5. **依存関係や前提タスクの順序**

   - 並行実行が可能なものと、順次実行が必須なものを明記する。
   - 他のタスク成果物を参照する場合は、そのタスクIDやPR番号を明示し、**別プロンプトとして切り出す計画**も検討する。

6. **Markdown形式で作成**

   - セクションや箇条書き、コードブロックを適宜使い、読みやすく整理する。

7. **AIエージェントがつまずきそうな箇所への補足・対策**
   - 環境変数の設定、認証情報の管理、ライブラリのバージョン、既存コードの取り扱いなど。
   - 特に規模が大きい機能を複数回に分割する際は、**タスク間で共有すべき前提や完成物**をあらかじめ明記する。

## 【出力例のイメージ】

### 指示文タイトル: [タスクID] XXX 機能の実装計画

#### 1. タスク概要

- この機能はユーザの○○を保存し、Supabase上で管理する。
- **分割要否**: ダークモード対応含む場合はサブタスクに分ける。(ex. サブタスクA=コントラスト比調整, サブタスクB=ダークモードテーマ統合)

#### 2. 前提情報

- 「プロジェクト基本情報」：コーディング規約は ESLint + Prettier
- 「タスク固有の補足情報」：RLS (Row Level Security) を有効にする必要あり

#### 3. 実装手順

1. Supabase の items テーブルへ カラム xxx を追加 (必要あればSQL例示)
2. Next.js で /items/[id] ページの API (API Routes) を拡張
3. フロントエンドフォームのUIを修正 (components/ItemForm.tsx)
4. ローカルで npm run dev → npm run test → E2Eテスト確認

#### 4. 成果物・完了条件

- ブランチ feature/items-crud-enhance でPRを作成
- LighthouseスコアがAA水準を満たす or コントラスト比要件を満たす
- 作業想定時間： **3時間以内**

#### 5. 注意事項

- RLSポリシー設定ファイル： .supabase/config/rls.sql
- カラーコードは shadcn/ui 既存テーマを基に拡張
- masterブランチからブランチを作成して作業すること。

#### 6. 並行/依存タスク

- [依存] #123: Supabase スキーマ管理タスク完了後に本タスク開始
- [並行可] #456: フロントのスタイル調整タスク
- **分割案**: このタスクが10ACUを超える場合、分割して複数の指示文プロンプトを作成

## プロジェクト基本情報

![[README.md]]

## タスク固有の補足情報
本タスクは、以下のようなタスクリストのうちの一つである。
![[tasks.md]]

## タスク内容


![[tasks.md#1. 基本構造の準備基本]]
